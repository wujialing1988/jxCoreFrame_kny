<?xml version="1.0" encoding="UTF-8"?>
<SqlMap>
	<sql id="queryPageList">
		SELECT * FROM (
			SELECT DISTINCT
				T.EQUIPMENT_IDX,
				T.EQUIPMENT_CODE,
				T.EQUIPMENT_NAME,
				T.CLASS_CODE,
				T.CLASS_NAME,
				(SELECT COUNT(*) FROM E_SBJX_EQUIPMENT_SHUTDOWN WHERE EQUIPMENT_IDX = T.EQUIPMENT_IDX) COUNT
			FROM
				E_SBJX_EQUIPMENT_SHUTDOWN T 
			WHERE
				RECORD_STATUS = 0
			ORDER BY 
				T.EQUIPMENT_CODE
		) T WHERE COUNT > 0
	</sql>
	<sql id="queryPageStatistics">
		<!-- 
		SELECT
			T.EQUIPMENT_IDX,
			T.EQUIPMENT_NAME,
			T.EQUIPMENT_CODE,
			T.CLASS_CODE,
			T.CLASS_NAME,
			SUM(T.SUFF) AS TOTAL_COUNT
		FROM
			(
				SELECT
					T.EQUIPMENT_IDX,
					T.EQUIPMENT_NAME,
					T.EQUIPMENT_CODE,
					T.CLASS_CODE,
					T.CLASS_NAME,
					TIMESTAMPDIFF(
						HOUR,
						T.START_TIME,
						T.END_TIME
					) SUFF
				FROM
					E_SBJX_EQUIPMENT_SHUTDOWN T
				WHERE
					T.RECORD_STATUS = 0
			) T
		GROUP BY
			T.EQUIPMENT_IDX,
			T.EQUIPMENT_NAME,
			T.EQUIPMENT_CODE,
			T.CLASS_CODE,
			T.CLASS_NAME
		ORDER BY
			TOTAL_COUNT DESC
		 -->
		 SELECT DISTINCT
			T.EQUIPMENT_IDX,
			T.EQUIPMENT_CODE,
			T.EQUIPMENT_NAME,
			T.CLASS_CODE,
			T.CLASS_NAME,
			(SELECT SUM(TIMESTAMPDIFF(HOUR, START_TIME, END_TIME)) FROM E_E_SBJX_EQUIPMENT_SHUTDOWN WHERE RECORD_STATUS= 0 AND EQUIPMENT_IDX = T.EQUIPMENT_IDX AND START_TIME &gt; '1988-02-10' AND START_TIME &lt; '2099-01-01') TOTAL_COUNT,
			(SELECT SUM(TIMESTAMPDIFF(HOUR, START_TIME, END_TIME)) FROM E_SBJX_EQUIPMENT_SHUTDOWN WHERE RECORD_STATUS= 0 AND EQUIPMENT_IDX = T.EQUIPMENT_IDX AND START_TIME &gt; '1988-02-10' AND START_TIME &lt; '2099-01-01' AND TYPE = '临修') TOTAL_COUNT_LX,
			(SELECT SUM(TIMESTAMPDIFF(HOUR, START_TIME, END_TIME)) FROM E_SBJX_EQUIPMENT_SHUTDOWN WHERE RECORD_STATUS= 0 AND EQUIPMENT_IDX = T.EQUIPMENT_IDX AND START_TIME &gt; '1988-02-10' AND START_TIME &lt; '2099-01-01' AND TYPE = '小修') TOTAL_COUNT_XX,
			(SELECT SUM(TIMESTAMPDIFF(HOUR, START_TIME, END_TIME)) FROM E_SBJX_EQUIPMENT_SHUTDOWN WHERE RECORD_STATUS= 0 AND EQUIPMENT_IDX = T.EQUIPMENT_IDX AND START_TIME &gt; '1988-02-10' AND START_TIME &lt; '2099-01-01' AND TYPE = '中修') TOTAL_COUNT_ZX,
			(SELECT SUM(TIMESTAMPDIFF(HOUR, START_TIME, END_TIME)) FROM E_SBJX_EQUIPMENT_SHUTDOWN WHERE RECORD_STATUS= 0 AND EQUIPMENT_IDX = T.EQUIPMENT_IDX AND START_TIME &gt; '1988-02-10' AND START_TIME &lt; '2099-01-01' AND TYPE = '项修') TOTAL_COUNT_XIANGX,
			(SELECT SUM(TIMESTAMPDIFF(HOUR, START_TIME, END_TIME)) FROM E_SBJX_EQUIPMENT_SHUTDOWN WHERE RECORD_STATUS= 0 AND EQUIPMENT_IDX = T.EQUIPMENT_IDX AND START_TIME &gt; '1988-02-10' AND START_TIME &lt; '2099-01-01' AND TYPE = '缺勤') TOTAL_COUNT_QQ,
			(SELECT SUM(TIMESTAMPDIFF(HOUR, START_TIME, END_TIME)) FROM E_SBJX_EQUIPMENT_SHUTDOWN WHERE RECORD_STATUS= 0 AND EQUIPMENT_IDX = T.EQUIPMENT_IDX AND START_TIME &gt; '1988-02-10' AND START_TIME &lt; '2099-01-01' AND TYPE = '停工待料') TOTAL_COUNT_TGDL
		FROM
			E_SBJX_EQUIPMENT_SHUTDOWN T
		ORDER BY TOTAL_COUNT DESC
	</sql>
</SqlMap>